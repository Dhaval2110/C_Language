// Write a Program to remove a Specific line from the given text file.

#include<stdio.h>
#include<stdlib.h>
main(int argc,char **argv)
{
	FILE *fp;
	char **p,ch;
	int line=0,length,c=0,i,j,n;
///////////////////////////////////////////////////////////////
	if(argc != 2)
	{
		printf("Usage:./a.out File_name\n");
		return;
	}
///////////////////////////////////////////////////////////////
	fp = fopen(argv[1],"r");
///////////////////////////////////////////////////////////////
	if(fp == 0)
	{
		printf("File is not present\n");
		return;
	}
///////////////////////////////////////////////////////////////
	while((ch=fgetc(fp))!=EOF)
	{
		c++;
		if(ch == '\n')
		{
			line++;
			if(length<c)
				length = c;
			c = 0;
		}
	}
	printf("Total lines are : %d\n",line);
	printf("Max. Line length is %d\n",length);
///////////////////////////////////////////////////////////////
	p = malloc(sizeof(char *)*line);

	for(i=0;i<line;i++)
	{
		p[i] = malloc(sizeof(char *)*length);
	}
///////////////////////////////////////////////////////////////
	rewind(fp);
///////////////////////////////////////////////////////////////
	for(i=0;i<line;i++)
	{
		fgets(p[i],length+1,fp);
		printf("%s",p[i]);
	}
	printf("---------------------------------\n");
///////////////////////////////////////////////////////////////
	printf("Which line you want to delete....\n");
	scanf("%d",&n);
///////////////////////////////////////////////////////////////
	if(n>line)
	{
		printf("Line is not Present\n");
		return;
	}
///////////////////////////////////////////////////////////////
	for(i=n-1;i<line;i++)
	{
		p[i] = p[i+1];
	}
	line--;
///////////////////////////////////////////////////////////////
	fp = fopen(argv[1],"w");
///////////////////////////////////////////////////////////////
	for(i=0;i<line;i++)
		printf("%s",p[i]);
	for(i=0;i<line;i++)
		fputs(p[i],fp);
///////////////////////////////////////////////////////////////
}
